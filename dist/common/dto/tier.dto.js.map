{"version":3,"sources":["../../../src/common/dto/tier.dto.ts"],"sourcesContent":["import { IsOptional, IsString, IsMongoId } from 'class-validator';\r\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\r\n\r\n/**\r\n * DTO cho việc nâng cấp tier\r\n */\r\nexport class UpgradeTierDto {\r\n  @ApiProperty({\r\n    description: 'User ID to upgrade',\r\n    example: '507f1f77bcf86cd799439011',\r\n  })\r\n  @IsMongoId()\r\n  userId: string;\r\n\r\n  @ApiProperty({\r\n    description: 'New tier code',\r\n    example: 'premium',\r\n  })\r\n  @IsString()\r\n  newTier: string;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Reason for upgrade',\r\n    example: 'Payment via Stripe - Order #12345',\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  reason?: string;\r\n}\r\n\r\n/**\r\n * Response DTO cho tier info\r\n */\r\nexport class TierInfoResponseDto {\r\n  @ApiProperty({ example: 'free' })\r\n  tier: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Tier limits',\r\n    example: {\r\n      maxDatabases: 2,\r\n      maxDataPerCollection: 100,\r\n      maxCollectionsPerDatabase: 5,\r\n      maxStorageGB: 1,\r\n      maxApiCallsPerDay: 1000,\r\n    },\r\n  })\r\n  limits: {\r\n    maxDatabases: number;\r\n    maxDataPerCollection: number;\r\n    maxCollectionsPerDatabase: number;\r\n    maxStorageGB: number;\r\n    maxApiCallsPerDay: number;\r\n  };\r\n\r\n  @ApiProperty({\r\n    description: 'Current usage statistics',\r\n    example: {\r\n      databases: 1,\r\n      apiCallsToday: 45,\r\n    },\r\n  })\r\n  usage: {\r\n    databases: number;\r\n    apiCallsToday: number;\r\n  };\r\n}\r\n\r\n/**\r\n * Response DTO cho limit check\r\n */\r\nexport class LimitCheckResponseDto {\r\n  @ApiProperty({ description: 'Whether action is allowed' })\r\n  allowed: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Reason if not allowed' })\r\n  reason?: string;\r\n\r\n  @ApiProperty({ description: 'Current count' })\r\n  current: number;\r\n\r\n  @ApiProperty({ description: 'Maximum limit' })\r\n  limit: number;\r\n}\r\n\r\n/**\r\n * Response DTO cho data usage\r\n */\r\nexport class DataUsageResponseDto {\r\n  @ApiProperty({ description: 'Collection name' })\r\n  collection: string;\r\n\r\n  @ApiProperty({ description: 'Current data count' })\r\n  count: number;\r\n\r\n  @ApiProperty({ description: 'Maximum limit' })\r\n  limit: number;\r\n\r\n  @ApiProperty({ description: 'Usage percentage' })\r\n  percentage: number;\r\n}\r\n"],"names":["DataUsageResponseDto","LimitCheckResponseDto","TierInfoResponseDto","UpgradeTierDto","description","example","maxDatabases","maxDataPerCollection","maxCollectionsPerDatabase","maxStorageGB","maxApiCallsPerDay","databases","apiCallsToday"],"mappings":";;;;;;;;;;;QAwFaA;eAAAA;;QAjBAC;eAAAA;;QAtCAC;eAAAA;;QA3BAC;eAAAA;;;gCANmC;yBACC;;;;;;;;;;AAK1C,IAAA,AAAMA,iBAAN,MAAMA;AAsBb;;;QApBIC,aAAa;QACbC,SAAS;;;;;;;QAMTD,aAAa;QACbC,SAAS;;;;;;;QAMTD,aAAa;QACbC,SAAS;;;;;;AAUN,IAAA,AAAMH,sBAAN,MAAMA;AAiCb;;;QAhCiBG,SAAS;;;;;;QAItBD,aAAa;QACbC,SAAS;YACPC,cAAc;YACdC,sBAAsB;YACtBC,2BAA2B;YAC3BC,cAAc;YACdC,mBAAmB;QACrB;;;;;;QAWAN,aAAa;QACbC,SAAS;YACPM,WAAW;YACXC,eAAe;QACjB;;;;AAWG,IAAA,AAAMX,wBAAN,MAAMA;AAYb;;;QAXiBG,aAAa;;;;;;QAGLA,aAAa;;;;;;QAGrBA,aAAa;;;;;;QAGbA,aAAa;;;;AAOvB,IAAA,AAAMJ,uBAAN,MAAMA;AAYb;;;QAXiBI,aAAa;;;;;;QAGbA,aAAa;;;;;;QAGbA,aAAa;;;;;;QAGbA,aAAa"}