{"version":3,"sources":["../../../src/common/pipes/objectid-validation.pipe.ts"],"sourcesContent":["import {\r\n  PipeTransform,\r\n  Injectable,\r\n  BadRequestException,\r\n  ArgumentMetadata,\r\n} from '@nestjs/common';\r\nimport { Types } from 'mongoose';\r\n\r\n@Injectable()\r\nexport class ObjectIdValidationPipe implements PipeTransform {\r\n  transform(value: any, metadata: ArgumentMetadata) {\r\n    // Chỉ validate nếu metadata.data là 'databaseId' hoặc 'id'\r\n    const shouldValidate =\r\n      metadata.type === 'param' &&\r\n      (metadata.data === 'databaseId' || metadata.data === 'id');\r\n\r\n    if (shouldValidate) {\r\n      if (!Types.ObjectId.isValid(value)) {\r\n        throw new BadRequestException(\r\n          `Invalid ${metadata.data} format: \"${value}\". Must be a 24 character hex string.`,\r\n        );\r\n      }\r\n    }\r\n\r\n    return value;\r\n  }\r\n}\r\n"],"names":["ObjectIdValidationPipe","transform","value","metadata","shouldValidate","type","data","Types","ObjectId","isValid","BadRequestException"],"mappings":";;;;+BASaA;;;eAAAA;;;wBAJN;0BACe;;;;;;;AAGf,IAAA,AAAMA,yBAAN,MAAMA;IACXC,UAAUC,KAAU,EAAEC,QAA0B,EAAE;QAChD,2DAA2D;QAC3D,MAAMC,iBACJD,SAASE,IAAI,KAAK,WACjBF,CAAAA,SAASG,IAAI,KAAK,gBAAgBH,SAASG,IAAI,KAAK,IAAG;QAE1D,IAAIF,gBAAgB;YAClB,IAAI,CAACG,eAAK,CAACC,QAAQ,CAACC,OAAO,CAACP,QAAQ;gBAClC,MAAM,IAAIQ,2BAAmB,CAC3B,CAAC,QAAQ,EAAEP,SAASG,IAAI,CAAC,UAAU,EAAEJ,MAAM,qCAAqC,CAAC;YAErF;QACF;QAEA,OAAOA;IACT;AACF"}