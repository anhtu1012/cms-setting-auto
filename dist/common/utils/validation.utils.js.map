{"version":3,"sources":["../../../src/common/utils/validation.utils.ts"],"sourcesContent":["import { BadRequestException } from '@nestjs/common';\r\nimport { Types } from 'mongoose';\r\n\r\n/**\r\n * Validates if a string is a valid MongoDB ObjectId\r\n * @param id - The string to validate\r\n * @param fieldName - Name of the field for error message (default: 'id')\r\n * @throws BadRequestException if invalid\r\n */\r\nexport function validateObjectId(id: string, fieldName: string = 'id'): void {\r\n  if (!Types.ObjectId.isValid(id)) {\r\n    throw new BadRequestException(\r\n      `Invalid ${fieldName} format: \"${id}\". Must be a 24 character hex string.`,\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Validates multiple ObjectIds at once\r\n * @param ids - Object with fieldName as key and id as value\r\n * @throws BadRequestException if any invalid\r\n */\r\nexport function validateObjectIds(ids: Record<string, string>): void {\r\n  for (const [fieldName, id] of Object.entries(ids)) {\r\n    validateObjectId(id, fieldName);\r\n  }\r\n}\r\n\r\n/**\r\n * Safely converts a string to ObjectId after validation\r\n * @param id - The string to convert\r\n * @param fieldName - Name of the field for error message\r\n * @returns Types.ObjectId\r\n */\r\nexport function toObjectId(\r\n  id: string,\r\n  fieldName: string = 'id',\r\n): Types.ObjectId {\r\n  validateObjectId(id, fieldName);\r\n  return new Types.ObjectId(id);\r\n}\r\n\r\n/**\r\n * Checks if a string is a valid ObjectId without throwing\r\n * @param id - The string to check\r\n * @returns boolean\r\n */\r\nexport function isValidObjectId(id: string): boolean {\r\n  return Types.ObjectId.isValid(id);\r\n}\r\n"],"names":["isValidObjectId","toObjectId","validateObjectId","validateObjectIds","id","fieldName","Types","ObjectId","isValid","BadRequestException","ids","Object","entries"],"mappings":";;;;;;;;;;;QA+CgBA;eAAAA;;QAbAC;eAAAA;;QAzBAC;eAAAA;;QAaAC;eAAAA;;;wBAtBoB;0BACd;AAQf,SAASD,iBAAiBE,EAAU,EAAEC,YAAoB,IAAI;IACnE,IAAI,CAACC,eAAK,CAACC,QAAQ,CAACC,OAAO,CAACJ,KAAK;QAC/B,MAAM,IAAIK,2BAAmB,CAC3B,CAAC,QAAQ,EAAEJ,UAAU,UAAU,EAAED,GAAG,qCAAqC,CAAC;IAE9E;AACF;AAOO,SAASD,kBAAkBO,GAA2B;IAC3D,KAAK,MAAM,CAACL,WAAWD,GAAG,IAAIO,OAAOC,OAAO,CAACF,KAAM;QACjDR,iBAAiBE,IAAIC;IACvB;AACF;AAQO,SAASJ,WACdG,EAAU,EACVC,YAAoB,IAAI;IAExBH,iBAAiBE,IAAIC;IACrB,OAAO,IAAIC,eAAK,CAACC,QAAQ,CAACH;AAC5B;AAOO,SAASJ,gBAAgBI,EAAU;IACxC,OAAOE,eAAK,CAACC,QAAQ,CAACC,OAAO,CAACJ;AAChC"}