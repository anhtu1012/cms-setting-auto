{"version":3,"sources":["../../../src/common/constants/api-routes.constants.ts"],"sourcesContent":["/**\r\n * API Route Constants\r\n * Tập trung quản lý tất cả các route paths trong ứng dụng\r\n */\r\n\r\n// API Version prefix\r\nexport const API_VERSION = 'v1';\r\n\r\n/**\r\n * Auth routes\r\n */\r\nexport const AUTH_ROUTES = {\r\n  BASE: `${API_VERSION}/auth`,\r\n  LOGIN: 'login',\r\n  REGISTER: 'register',\r\n  LOGOUT: 'logout',\r\n  REFRESH: 'refresh',\r\n} as const;\r\n\r\n/**\r\n * User routes\r\n */\r\nexport const USER_ROUTES = {\r\n  BASE: `${API_VERSION}/users`,\r\n  PROFILE: 'profile',\r\n  BY_ID: ':id',\r\n} as const;\r\n\r\n/**\r\n * Database routes\r\n */\r\nexport const DATABASE_ROUTES = {\r\n  BASE: `${API_VERSION}/databases`,\r\n  BY_ID: ':id',\r\n  PERMANENT_DELETE: ':id/permanent',\r\n} as const;\r\n\r\n/**\r\n * Collection Schema routes\r\n */\r\nexport const COLLECTION_SCHEMA_ROUTES = {\r\n  BASE: `${API_VERSION}/collection-schemas`,\r\n  BY_DATABASE: ':databaseId',\r\n  BY_NAME: ':databaseId/:collectionName',\r\n} as const;\r\n\r\n/**\r\n * Dynamic Data routes\r\n */\r\nexport const DYNAMIC_DATA_ROUTES = {\r\n  BASE: `${API_VERSION}/:databaseId/:collectionName`,\r\n  // Sub-routes (chỉ dùng trong decorator, không có prefix BASE)\r\n  BULK: 'bulk',\r\n  REPLACE_ALL: 'replace-all',\r\n  QUERY: 'query',\r\n  COUNT: 'count',\r\n  BY_ID: ':id',\r\n  HARD_DELETE: ':id/hard',\r\n  RESTORE: ':id/restore',\r\n} as const;\r\n\r\n/**\r\n * Tier routes\r\n */\r\nexport const TIER_ROUTES = {\r\n  BASE: `${API_VERSION}/tier`,\r\n  INFO: 'info',\r\n  CHECK_DATABASE_LIMIT: 'check-database-limit',\r\n  CHECK_DATA_LIMIT: 'check-data-limit/:databaseId/:collectionName',\r\n  USAGE: 'usage',\r\n  USAGE_BY_DATABASE: 'usage/:databaseId',\r\n  UPGRADE: 'upgrade',\r\n} as const;\r\n\r\n/**\r\n * Route Patterns for Guards\r\n * Các pattern dùng để kiểm tra route trong guards\r\n */\r\nexport const ROUTE_PATTERNS = {\r\n  // Database creation\r\n  DATABASE_CREATE: `/${DATABASE_ROUTES.BASE}`,\r\n\r\n  // Data creation patterns\r\n  DATA_CREATE: '/:databaseId/:collectionName',\r\n  DATA_BULK_CREATE: '/:databaseId/:collectionName/bulk',\r\n  DATA_REPLACE_ALL: '/:databaseId/:collectionName/replace-all',\r\n\r\n  // With version prefix\r\n  DATA_CREATE_V1: `/${API_VERSION}/:databaseId/:collectionName`,\r\n  DATA_BULK_CREATE_V1: `/${API_VERSION}/:databaseId/:collectionName/bulk`,\r\n  DATA_REPLACE_ALL_V1: `/${API_VERSION}/:databaseId/:collectionName/replace-all`,\r\n} as const;\r\n\r\n/**\r\n * Helper function to build full route path\r\n */\r\nexport const buildRoute = (base: string, ...paths: string[]): string => {\r\n  return `/${base}/${paths.join('/')}`.replace(/\\/+/g, '/');\r\n};\r\n\r\n/**\r\n * Helper function to check if path matches pattern\r\n */\r\nexport const matchesRoute = (path: string, pattern: string): boolean => {\r\n  const normalizedPath = path.startsWith('/') ? path : `/${path}`;\r\n  return normalizedPath === pattern || normalizedPath.includes(pattern);\r\n};\r\n"],"names":["API_VERSION","AUTH_ROUTES","COLLECTION_SCHEMA_ROUTES","DATABASE_ROUTES","DYNAMIC_DATA_ROUTES","ROUTE_PATTERNS","TIER_ROUTES","USER_ROUTES","buildRoute","matchesRoute","BASE","LOGIN","REGISTER","LOGOUT","REFRESH","PROFILE","BY_ID","PERMANENT_DELETE","BY_DATABASE","BY_NAME","BULK","REPLACE_ALL","QUERY","COUNT","HARD_DELETE","RESTORE","INFO","CHECK_DATABASE_LIMIT","CHECK_DATA_LIMIT","USAGE","USAGE_BY_DATABASE","UPGRADE","DATABASE_CREATE","DATA_CREATE","DATA_BULK_CREATE","DATA_REPLACE_ALL","DATA_CREATE_V1","DATA_BULK_CREATE_V1","DATA_REPLACE_ALL_V1","base","paths","join","replace","path","pattern","normalizedPath","startsWith","includes"],"mappings":"AAAA;;;CAGC,GAED,qBAAqB;;;;;;;;;;;;QACRA;eAAAA;;QAKAC;eAAAA;;QA6BAC;eAAAA;;QATAC;eAAAA;;QAkBAC;eAAAA;;QA6BAC;eAAAA;;QAdAC;eAAAA;;QA1CAC;eAAAA;;QA0EAC;eAAAA;;QAOAC;eAAAA;;;AAjGN,MAAMT,cAAc;AAKpB,MAAMC,cAAc;IACzBS,MAAM,GAAGV,YAAY,KAAK,CAAC;IAC3BW,OAAO;IACPC,UAAU;IACVC,QAAQ;IACRC,SAAS;AACX;AAKO,MAAMP,cAAc;IACzBG,MAAM,GAAGV,YAAY,MAAM,CAAC;IAC5Be,SAAS;IACTC,OAAO;AACT;AAKO,MAAMb,kBAAkB;IAC7BO,MAAM,GAAGV,YAAY,UAAU,CAAC;IAChCgB,OAAO;IACPC,kBAAkB;AACpB;AAKO,MAAMf,2BAA2B;IACtCQ,MAAM,GAAGV,YAAY,mBAAmB,CAAC;IACzCkB,aAAa;IACbC,SAAS;AACX;AAKO,MAAMf,sBAAsB;IACjCM,MAAM,GAAGV,YAAY,4BAA4B,CAAC;IAClD,8DAA8D;IAC9DoB,MAAM;IACNC,aAAa;IACbC,OAAO;IACPC,OAAO;IACPP,OAAO;IACPQ,aAAa;IACbC,SAAS;AACX;AAKO,MAAMnB,cAAc;IACzBI,MAAM,GAAGV,YAAY,KAAK,CAAC;IAC3B0B,MAAM;IACNC,sBAAsB;IACtBC,kBAAkB;IAClBC,OAAO;IACPC,mBAAmB;IACnBC,SAAS;AACX;AAMO,MAAM1B,iBAAiB;IAC5B,oBAAoB;IACpB2B,iBAAiB,CAAC,CAAC,EAAE7B,gBAAgBO,IAAI,EAAE;IAE3C,yBAAyB;IACzBuB,aAAa;IACbC,kBAAkB;IAClBC,kBAAkB;IAElB,sBAAsB;IACtBC,gBAAgB,CAAC,CAAC,EAAEpC,YAAY,4BAA4B,CAAC;IAC7DqC,qBAAqB,CAAC,CAAC,EAAErC,YAAY,iCAAiC,CAAC;IACvEsC,qBAAqB,CAAC,CAAC,EAAEtC,YAAY,wCAAwC,CAAC;AAChF;AAKO,MAAMQ,aAAa,CAAC+B,MAAc,GAAGC;IAC1C,OAAO,CAAC,CAAC,EAAED,KAAK,CAAC,EAAEC,MAAMC,IAAI,CAAC,MAAM,CAACC,OAAO,CAAC,QAAQ;AACvD;AAKO,MAAMjC,eAAe,CAACkC,MAAcC;IACzC,MAAMC,iBAAiBF,KAAKG,UAAU,CAAC,OAAOH,OAAO,CAAC,CAAC,EAAEA,MAAM;IAC/D,OAAOE,mBAAmBD,WAAWC,eAAeE,QAAQ,CAACH;AAC/D"}