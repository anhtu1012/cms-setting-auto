{"version":3,"sources":["../../../src/modules/dynamic-cms/dynamic-cms.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\r\nimport { MongooseModule } from '@nestjs/mongoose';\r\nimport {\r\n  CollectionSchemaModel,\r\n  CollectionSchemaSchema,\r\n} from './schemas/collection-schema.schema';\r\nimport { DynamicData, DynamicDataSchema } from './schemas/dynamic-data.schema';\r\nimport { Database, DatabaseSchema } from './schemas/database.schema';\r\nimport { CollectionSchemaService } from './controller/collection-schema/collection-schema.service';\r\nimport { CollectionSchemaController } from './controller/collection-schema/collection-schema.controller';\r\nimport { DynamicDataService } from './controller/dynamic-data/dynamic-data.service';\r\nimport { DynamicDataController } from './controller/dynamic-data/dynamic-data.controller';\r\nimport { RelationshipService } from './controller/dynamic-data/relationship.service';\r\nimport { DatabaseService } from './controller/database/database.service';\r\nimport { DatabaseController } from './controller/database/database.controller';\r\nimport { DatabaseOwnershipGuard } from '../../common/guards/database-ownership.guard';\r\nimport { TierLimitsGuard } from '../../common/guards/tier-limits.guard';\r\nimport { User, UserSchema } from '../users/schemas/user.schema';\r\nimport { TierModule } from '../../common/tier/tier.module';\r\n\r\n@Module({\r\n  imports: [\r\n    MongooseModule.forFeature([\r\n      { name: Database.name, schema: DatabaseSchema },\r\n      { name: CollectionSchemaModel.name, schema: CollectionSchemaSchema },\r\n      { name: DynamicData.name, schema: DynamicDataSchema },\r\n      { name: User.name, schema: UserSchema },\r\n    ]),\r\n    TierModule, // Import TierModule để sử dụng TierConfigService trong TierLimitsGuard\r\n  ],\r\n  controllers: [\r\n    DatabaseController,\r\n    CollectionSchemaController,\r\n    DynamicDataController,\r\n  ],\r\n  providers: [\r\n    DatabaseService,\r\n    CollectionSchemaService,\r\n    DynamicDataService,\r\n    RelationshipService,\r\n    DatabaseOwnershipGuard,\r\n    TierLimitsGuard,\r\n  ],\r\n  exports: [\r\n    DatabaseService,\r\n    CollectionSchemaService,\r\n    DynamicDataService,\r\n    RelationshipService,\r\n    MongooseModule, // Export để guards có thể inject models\r\n  ],\r\n})\r\nexport class DynamicCmsModule {}\r\n"],"names":["DynamicCmsModule","imports","MongooseModule","forFeature","name","Database","schema","DatabaseSchema","CollectionSchemaModel","CollectionSchemaSchema","DynamicData","DynamicDataSchema","User","UserSchema","TierModule","controllers","DatabaseController","CollectionSchemaController","DynamicDataController","providers","DatabaseService","CollectionSchemaService","DynamicDataService","RelationshipService","DatabaseOwnershipGuard","TierLimitsGuard","exports"],"mappings":";;;;+BAmDaA;;;eAAAA;;;wBAnDU;0BACQ;wCAIxB;mCACwC;gCACN;yCACD;4CACG;oCACR;uCACG;qCACF;iCACJ;oCACG;wCACI;iCACP;4BACC;4BACN;;;;;;;AAiCpB,IAAA,AAAMA,mBAAN,MAAMA;AAAkB;;;QA9B7BC,SAAS;YACPC,wBAAc,CAACC,UAAU,CAAC;gBACxB;oBAAEC,MAAMC,wBAAQ,CAACD,IAAI;oBAAEE,QAAQC,8BAAc;gBAAC;gBAC9C;oBAAEH,MAAMI,6CAAqB,CAACJ,IAAI;oBAAEE,QAAQG,8CAAsB;gBAAC;gBACnE;oBAAEL,MAAMM,8BAAW,CAACN,IAAI;oBAAEE,QAAQK,oCAAiB;gBAAC;gBACpD;oBAAEP,MAAMQ,gBAAI,CAACR,IAAI;oBAAEE,QAAQO,sBAAU;gBAAC;aACvC;YACDC,sBAAU;SACX;QACDC,aAAa;YACXC,sCAAkB;YAClBC,sDAA0B;YAC1BC,4CAAqB;SACtB;QACDC,WAAW;YACTC,gCAAe;YACfC,gDAAuB;YACvBC,sCAAkB;YAClBC,wCAAmB;YACnBC,8CAAsB;YACtBC,gCAAe;SAChB;QACDC,SAAS;YACPN,gCAAe;YACfC,gDAAuB;YACvBC,sCAAkB;YAClBC,wCAAmB;YACnBrB,wBAAc;SACf"}