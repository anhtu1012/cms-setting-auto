{"version":3,"sources":["../../../../src/modules/dynamic-cms/dto/collection-schema.dto.ts"],"sourcesContent":["import {\r\n  IsString,\r\n  IsOptional,\r\n  IsArray,\r\n  IsBoolean,\r\n  ValidateNested,\r\n  IsEnum,\r\n  IsNumber,\r\n  IsNotEmpty,\r\n} from 'class-validator';\r\nimport { Type } from 'class-transformer';\r\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\r\nimport { FieldType } from '../interfaces/field-types.interface';\r\n\r\nexport class FieldValidationDto {\r\n  @ApiPropertyOptional({ description: 'Field is required' })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  required?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Minimum value for number fields' })\r\n  @IsOptional()\r\n  @IsNumber()\r\n  min?: number;\r\n\r\n  @ApiPropertyOptional({ description: 'Maximum value for number fields' })\r\n  @IsOptional()\r\n  @IsNumber()\r\n  max?: number;\r\n\r\n  @ApiPropertyOptional({ description: 'Minimum length for text fields' })\r\n  @IsOptional()\r\n  @IsNumber()\r\n  minLength?: number;\r\n\r\n  @ApiPropertyOptional({ description: 'Maximum length for text fields' })\r\n  @IsOptional()\r\n  @IsNumber()\r\n  maxLength?: number;\r\n\r\n  @ApiPropertyOptional({ description: 'Regex pattern for validation' })\r\n  @IsOptional()\r\n  @IsString()\r\n  pattern?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Allowed enum values', type: [String] })\r\n  @IsOptional()\r\n  @IsArray()\r\n  enum?: string[];\r\n}\r\n\r\nexport class SelectOptionDto {\r\n  @ApiProperty({ description: 'Option label', example: 'Option 1' })\r\n  @IsString()\r\n  label: string;\r\n\r\n  @ApiProperty({ description: 'Option value', example: 'option1' })\r\n  @IsString()\r\n  value: string;\r\n}\r\n\r\nexport class ReferenceConfigDto {\r\n  @ApiProperty({ description: 'Referenced collection name', example: 'users' })\r\n  @IsString()\r\n  collection: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Display field from referenced collection',\r\n    example: 'name',\r\n  })\r\n  @IsString()\r\n  displayField: string;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Allow multiple references',\r\n    default: false,\r\n  })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  multiple?: boolean;\r\n}\r\n\r\nexport class FieldDefinitionDto {\r\n  @ApiProperty({ description: 'Field name (slug)', example: 'product_name' })\r\n  @IsString()\r\n  name: string;\r\n\r\n  @ApiProperty({ enum: FieldType, description: 'Field type' })\r\n  @IsEnum(FieldType)\r\n  type: FieldType;\r\n\r\n  @ApiProperty({ description: 'Field display label', example: 'Product Name' })\r\n  @IsOptional()\r\n  @IsString()\r\n  label: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Field description' })\r\n  @IsOptional()\r\n  @IsString()\r\n  description?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Default value for the field' })\r\n  @IsOptional()\r\n  defaultValue?: any;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Validation rules',\r\n    type: FieldValidationDto,\r\n  })\r\n  @IsOptional()\r\n  @ValidateNested()\r\n  @Type(() => FieldValidationDto)\r\n  validation?: FieldValidationDto;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Options for select/radio fields',\r\n    type: [SelectOptionDto],\r\n  })\r\n  @IsOptional()\r\n  @IsArray()\r\n  @ValidateNested({ each: true })\r\n  @Type(() => SelectOptionDto)\r\n  options?: SelectOptionDto[];\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Reference configuration',\r\n    type: ReferenceConfigDto,\r\n  })\r\n  @IsOptional()\r\n  @ValidateNested()\r\n  @Type(() => ReferenceConfigDto)\r\n  referenceConfig?: ReferenceConfigDto;\r\n\r\n  @ApiPropertyOptional({ description: 'Placeholder text' })\r\n  @IsOptional()\r\n  @IsString()\r\n  placeholder?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Help text' })\r\n  @IsOptional()\r\n  @IsString()\r\n  helpText?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Show in list view', default: true })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  showInList?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Show in form', default: true })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  showInForm?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Field is sortable', default: false })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  sortable?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Field is searchable', default: false })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  searchable?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Display order', default: 0 })\r\n  @IsOptional()\r\n  @IsNumber()\r\n  order?: number;\r\n}\r\n\r\nexport class CreateCollectionSchemaDto {\r\n  @ApiProperty({\r\n    description: 'Database ID that this collection belongs to',\r\n    example: '507f1f77bcf86cd799439011',\r\n  })\r\n  @IsString()\r\n  @IsNotEmpty()\r\n  databaseId: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Collection name (slug)',\r\n    example: 'products',\r\n  })\r\n  @IsString()\r\n  name: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Collection display name',\r\n    example: 'Products',\r\n  })\r\n  @IsString()\r\n  displayName: string;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Collection description',\r\n    example: 'Manage product catalog',\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  description?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Icon name', example: 'shopping-cart' })\r\n  @IsOptional()\r\n  @IsString()\r\n  icon?: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Field definitions',\r\n    type: [FieldDefinitionDto],\r\n  })\r\n  @IsArray()\r\n  @ValidateNested({ each: true })\r\n  @Type(() => FieldDefinitionDto)\r\n  fields: FieldDefinitionDto[];\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Auto-add timestamps',\r\n    default: true,\r\n  })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  timestamps?: boolean;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Enable soft delete',\r\n    default: false,\r\n  })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  softDelete?: boolean;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Enable auto-generated API',\r\n    default: true,\r\n  })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  enableApi?: boolean;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Custom API path',\r\n    example: '/api/v1/products',\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  apiPath?: string;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Permission configuration',\r\n    example: { create: ['admin'], read: ['admin', 'user'] },\r\n  })\r\n  @IsOptional()\r\n  permissions?: {\r\n    create?: string[];\r\n    read?: string[];\r\n    update?: string[];\r\n    delete?: string[];\r\n  };\r\n}\r\n\r\nexport class UpdateCollectionSchemaDto {\r\n  @ApiPropertyOptional({ description: 'Collection display name' })\r\n  @IsOptional()\r\n  @IsString()\r\n  displayName?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Collection description' })\r\n  @IsOptional()\r\n  @IsString()\r\n  description?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Icon name' })\r\n  @IsOptional()\r\n  @IsString()\r\n  icon?: string;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Field definitions',\r\n    type: [FieldDefinitionDto],\r\n  })\r\n  @IsOptional()\r\n  @IsArray()\r\n  @ValidateNested({ each: true })\r\n  @Type(() => FieldDefinitionDto)\r\n  fields?: FieldDefinitionDto[];\r\n\r\n  @ApiPropertyOptional({ description: 'Auto-add timestamps' })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  timestamps?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Enable soft delete' })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  softDelete?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Enable auto-generated API' })\r\n  @IsOptional()\r\n  @IsBoolean()\r\n  enableApi?: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'Custom API path' })\r\n  @IsOptional()\r\n  @IsString()\r\n  apiPath?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Permission configuration' })\r\n  @IsOptional()\r\n  permissions?: {\r\n    create?: string[];\r\n    read?: string[];\r\n    update?: string[];\r\n    delete?: string[];\r\n  };\r\n}\r\n"],"names":["CreateCollectionSchemaDto","FieldDefinitionDto","FieldValidationDto","ReferenceConfigDto","SelectOptionDto","UpdateCollectionSchemaDto","description","type","String","example","default","enum","FieldType","each","create","read"],"mappings":";;;;;;;;;;;QAyKaA;eAAAA;;QAvFAC;eAAAA;;QApEAC;eAAAA;;QA+CAC;eAAAA;;QAVAC;eAAAA;;QAgNAC;eAAAA;;;gCA1PN;kCACc;yBAC4B;qCACvB;;;;;;;;;;AAEnB,IAAA,AAAMH,qBAAN,MAAMA;AAmCb;;;QAlCyBI,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;QAAuBC,MAAM;YAACC;SAAO;;;;;;AAMpE,IAAA,AAAMJ,kBAAN,MAAMA;AAQb;;;QAPiBE,aAAa;QAAgBG,SAAS;;;;;;;QAItCH,aAAa;QAAgBG,SAAS;;;;;AAKhD,IAAA,AAAMN,qBAAN,MAAMA;AAmBb;;;QAlBiBG,aAAa;QAA8BG,SAAS;;;;;;;QAKjEH,aAAa;QACbG,SAAS;;;;;;;QAMTH,aAAa;QACbI,SAAS;;;;;;AAON,IAAA,AAAMT,qBAAN,MAAMA;AAqFb;;;QApFiBK,aAAa;QAAqBG,SAAS;;;;;;;QAI3CE,MAAMC,8BAAS;QAAEN,aAAa;;;;;;;QAI9BA,aAAa;QAAuBG,SAAS;;;;;;;;QAKrCH,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;QAKlCA,aAAa;QACbC,MAAML;;;;oCAIIA;;;;;QAIVI,aAAa;QACbC,MAAM;YAACH;SAAgB;;;;;QAIPS,MAAM;;oCACZT;;;;;QAIVE,aAAa;QACbC,MAAMJ;;;;oCAIIA;;;;;QAGWG,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;QAAqBI,SAAS;;;;;;;;QAK3CJ,aAAa;QAAgBI,SAAS;;;;;;;;QAKtCJ,aAAa;QAAqBI,SAAS;;;;;;;;QAK3CJ,aAAa;QAAuBI,SAAS;;;;;;;;QAK7CJ,aAAa;QAAiBI,SAAS;;;;;;AAMzD,IAAA,AAAMV,4BAAN,MAAMA;AAwFb;;;QAtFIM,aAAa;QACbG,SAAS;;;;;;;;QAOTH,aAAa;QACbG,SAAS;;;;;;;QAMTH,aAAa;QACbG,SAAS;;;;;;;QAMTH,aAAa;QACbG,SAAS;;;;;;;;QAMYH,aAAa;QAAaG,SAAS;;;;;;;;QAMxDH,aAAa;QACbC,MAAM;YAACN;SAAmB;;;;QAGVY,MAAM;;oCACZZ;;;;;QAIVK,aAAa;QACbI,SAAS;;;;;;;;QAOTJ,aAAa;QACbI,SAAS;;;;;;;;QAOTJ,aAAa;QACbI,SAAS;;;;;;;;QAOTJ,aAAa;QACbG,SAAS;;;;;;;;QAOTH,aAAa;QACbG,SAAS;YAAEK,QAAQ;gBAAC;aAAQ;YAAEC,MAAM;gBAAC;gBAAS;aAAO;QAAC;;;;;AAWnD,IAAA,AAAMV,4BAAN,MAAMA;AAsDb;;;QArDyBC,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAMlCA,aAAa;QACbC,MAAM;YAACN;SAAmB;;;;;QAIVY,MAAM;;oCACZZ;;;;;QAGWK,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa"}