{"version":3,"sources":["../../../src/modules/auth/auth.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\r\nimport { JwtModule } from '@nestjs/jwt';\r\nimport { ConfigModule, ConfigService } from '@nestjs/config';\r\nimport { PassportModule } from '@nestjs/passport';\r\nimport { MongooseModule } from '@nestjs/mongoose';\r\nimport { AuthController } from './auth.controller';\r\nimport { AuthService } from './auth.service';\r\nimport { User, UserSchema } from '../users/schemas/user.schema';\r\nimport {\r\n  BlacklistedToken,\r\n  BlacklistedTokenSchema,\r\n} from './schemas/blacklisted-token.schema';\r\nimport { JwtStrategy } from './strategies/jwt.strategy';\r\nimport { LoginHandler } from './handlers/login.handler';\r\nimport { RegisterHandler } from './handlers/register.handler';\r\nimport { RefreshTokenHandler } from './handlers/refresh-token.handler';\r\nimport { LogoutHandler } from './handlers/logout.handler';\r\n\r\n@Module({\r\n  imports: [\r\n    MongooseModule.forFeature([\r\n      { name: User.name, schema: UserSchema },\r\n      { name: BlacklistedToken.name, schema: BlacklistedTokenSchema },\r\n    ]),\r\n    PassportModule,\r\n    JwtModule.registerAsync({\r\n      imports: [ConfigModule],\r\n      inject: [ConfigService],\r\n      useFactory: async (configService: ConfigService) => ({\r\n        secret:\r\n          configService.get<string>('JWT_SECRET') ||\r\n          'your-secret-key-change-this',\r\n        // default token lifetime set to 1 year (in seconds)\r\n        signOptions: { expiresIn: 365 * 24 * 60 * 60 },\r\n      }),\r\n    }),\r\n  ],\r\n  controllers: [AuthController],\r\n  providers: [\r\n    AuthService,\r\n    JwtStrategy,\r\n    LoginHandler,\r\n    RegisterHandler,\r\n    RefreshTokenHandler,\r\n    LogoutHandler,\r\n  ],\r\n  exports: [AuthService, JwtModule],\r\n})\r\nexport class AuthModule {}\r\n"],"names":["AuthModule","imports","MongooseModule","forFeature","name","User","schema","UserSchema","BlacklistedToken","BlacklistedTokenSchema","PassportModule","JwtModule","registerAsync","ConfigModule","inject","ConfigService","useFactory","configService","secret","get","signOptions","expiresIn","controllers","AuthController","providers","AuthService","JwtStrategy","LoginHandler","RegisterHandler","RefreshTokenHandler","LogoutHandler","exports"],"mappings":";;;;+BAgDaA;;;eAAAA;;;wBAhDU;qBACG;wBACkB;0BACb;0BACA;gCACA;6BACH;4BACK;wCAI1B;6BACqB;8BACC;iCACG;qCACI;+BACN;;;;;;;AAgCvB,IAAA,AAAMA,aAAN,MAAMA;AAAY;;;QA7BvBC,SAAS;YACPC,wBAAc,CAACC,UAAU,CAAC;gBACxB;oBAAEC,MAAMC,gBAAI,CAACD,IAAI;oBAAEE,QAAQC,sBAAU;gBAAC;gBACtC;oBAAEH,MAAMI,wCAAgB,CAACJ,IAAI;oBAAEE,QAAQG,8CAAsB;gBAAC;aAC/D;YACDC,wBAAc;YACdC,cAAS,CAACC,aAAa,CAAC;gBACtBX,SAAS;oBAACY,oBAAY;iBAAC;gBACvBC,QAAQ;oBAACC,qBAAa;iBAAC;gBACvBC,YAAY,OAAOC,gBAAkC,CAAA;wBACnDC,QACED,cAAcE,GAAG,CAAS,iBAC1B;wBACF,oDAAoD;wBACpDC,aAAa;4BAAEC,WAAW,MAAM,KAAK,KAAK;wBAAG;oBAC/C,CAAA;YACF;SACD;QACDC,aAAa;YAACC,8BAAc;SAAC;QAC7BC,WAAW;YACTC,wBAAW;YACXC,wBAAW;YACXC,0BAAY;YACZC,gCAAe;YACfC,wCAAmB;YACnBC,4BAAa;SACd;QACDC,SAAS;YAACN,wBAAW;YAAEd,cAAS;SAAC"}