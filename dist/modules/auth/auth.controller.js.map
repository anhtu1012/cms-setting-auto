{"version":3,"sources":["../../../src/modules/auth/auth.controller.ts"],"sourcesContent":["import { Controller, Post, Body, HttpCode, HttpStatus } from '@nestjs/common';\r\nimport { ApiTags, ApiOperation, ApiResponse } from '@nestjs/swagger';\r\nimport { AuthService } from './auth.service';\r\nimport {\r\n  LoginRequestDto,\r\n  RegisterRequestDto,\r\n  RefreshTokenRequestDto,\r\n} from './dto/auth-request.dto';\r\nimport {\r\n  LoginResponseDto,\r\n  RegisterResponseDto,\r\n  RefreshTokenResponseDto,\r\n} from './dto/auth-response.dto';\r\nimport { AUTH_ROUTES } from '../../common/constants/api-routes.constants';\r\n\r\n@ApiTags('Authentication')\r\n@Controller(AUTH_ROUTES.BASE)\r\nexport class AuthController {\r\n  constructor(private readonly authService: AuthService) {}\r\n\r\n  @Post('login')\r\n  @HttpCode(HttpStatus.OK)\r\n  @ApiOperation({ summary: 'Login user' })\r\n  @ApiResponse({\r\n    status: 200,\r\n    description: 'User logged in successfully',\r\n    type: LoginResponseDto,\r\n  })\r\n  @ApiResponse({ status: 401, description: 'Invalid credentials' })\r\n  async login(@Body() loginDto: LoginRequestDto): Promise<LoginResponseDto> {\r\n    return this.authService.login(loginDto);\r\n  }\r\n\r\n  @Post('register')\r\n  @HttpCode(HttpStatus.CREATED)\r\n  @ApiOperation({ summary: 'Register new user' })\r\n  @ApiResponse({\r\n    status: 201,\r\n    description: 'User registered successfully',\r\n    type: RegisterResponseDto,\r\n  })\r\n  @ApiResponse({ status: 409, description: 'Email or username already exists' })\r\n  async register(\r\n    @Body() registerDto: RegisterRequestDto,\r\n  ): Promise<RegisterResponseDto> {\r\n    return this.authService.register(registerDto);\r\n  }\r\n\r\n  @Post('refresh-token')\r\n  @HttpCode(HttpStatus.OK)\r\n  @ApiOperation({ summary: 'Refresh access token' })\r\n  @ApiResponse({\r\n    status: 200,\r\n    description: 'Token refreshed successfully',\r\n    type: RefreshTokenResponseDto,\r\n  })\r\n  @ApiResponse({ status: 401, description: 'Invalid or expired refresh token' })\r\n  async refreshToken(\r\n    @Body() refreshTokenDto: RefreshTokenRequestDto,\r\n  ): Promise<RefreshTokenResponseDto> {\r\n    return this.authService.refreshToken(refreshTokenDto);\r\n  }\r\n\r\n  @Post('logout')\r\n  @HttpCode(HttpStatus.OK)\r\n  @ApiOperation({ summary: 'Logout and revoke refresh token' })\r\n  @ApiResponse({ status: 200, description: 'Logged out successfully' })\r\n  async logout(@Body() refreshTokenDto: RefreshTokenRequestDto) {\r\n    return this.authService.logout(refreshTokenDto.refreshToken);\r\n  }\r\n}\r\n"],"names":["AuthController","login","loginDto","authService","register","registerDto","refreshToken","refreshTokenDto","logout","OK","summary","status","description","type","LoginResponseDto","CREATED","RegisterResponseDto","RefreshTokenResponseDto","BASE"],"mappings":";;;;+BAiBaA;;;eAAAA;;;wBAjBgD;yBACV;6BACvB;gCAKrB;iCAKA;oCACqB;;;;;;;;;;;;;;;AAIrB,IAAA,AAAMA,iBAAN,MAAMA;IAGX,MASMC,MAAM,AAAQC,QAAyB,EAA6B;QACxE,OAAO,IAAI,CAACC,WAAW,CAACF,KAAK,CAACC;IAChC;IAEA,MASME,SACJ,AAAQC,WAA+B,EACT;QAC9B,OAAO,IAAI,CAACF,WAAW,CAACC,QAAQ,CAACC;IACnC;IAEA,MASMC,aACJ,AAAQC,eAAuC,EACb;QAClC,OAAO,IAAI,CAACJ,WAAW,CAACG,YAAY,CAACC;IACvC;IAEA,MAIMC,OAAO,AAAQD,eAAuC,EAAE;QAC5D,OAAO,IAAI,CAACJ,WAAW,CAACK,MAAM,CAACD,gBAAgBD,YAAY;IAC7D;IAnDA,YAAY,AAAiBH,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AAoD1D;;;6CAjDuBM;;QACLC,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbC,MAAMC,iCAAgB;;;QAETH,QAAQ;QAAKC,aAAa;;;;;;;;;;;6CAMpBG;;QACLL,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbC,MAAMG,oCAAmB;;;QAEZL,QAAQ;QAAKC,aAAa;;;;;;;;;;;6CAQpBH;;QACLC,SAAS;;;QAEvBC,QAAQ;QACRC,aAAa;QACbC,MAAMI,wCAAuB;;;QAEhBN,QAAQ;QAAKC,aAAa;;;;;;;;;;;6CAQpBH;;QACLC,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;4DAlDnBM"}